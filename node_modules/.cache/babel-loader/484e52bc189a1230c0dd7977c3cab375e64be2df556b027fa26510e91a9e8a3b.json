{"ast":null,"code":"export default {\n  name: 'vue_login',\n  props: {\n    ip: String\n  },\n  data() {\n    return {\n      vue_id: '',\n      vue_psw: ''\n    };\n  },\n  methods: {\n    login_: function (event) {\n      var params = 'id=' + this.vue_id + '&password=' + this.vue_psw;\n      fetch('http://' + this.ip + ':3007/api/login', {\n        type: 'post',\n        contentType: 'application/x-www-form-urlencoded',\n        data: params\n      }).then(function (result) {\n        window.localStorage.setItem(result.id, result.id);\n        window.localStorage.setItem('serverIP', result.serverIP);\n        sessionStorage.name = result.name;\n        sessionStorage.id = result.id;\n        sessionStorage.serverIP = result.serverIP;\n        if (result.status === 0) {\n          alert(\"登录成功,跳转至主界面\");\n          window.location.href = result.url;\n        } else alert(result.message);\n      }).catch(err => {\n        alert(\"登陆失败！\" + err);\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","props","ip","String","data","vue_id","vue_psw","methods","login_","event","params","fetch","type","contentType","then","result","window","localStorage","setItem","id","serverIP","sessionStorage","status","alert","location","href","url","message","catch","err","console","log"],"sources":["src/components/vue_login.vue"],"sourcesContent":["<template>\r\n    <transition name=\"lb_trans\">\r\n        <div class=\"login-box\"\r\n            v-show=\"this.$parent.form_box_current === 'login' && this.$parent.panel_current === 'login_register'\">\r\n            <h1>login</h1>\r\n            <input type=\"text\" placeholder=\"用户名\" name=\"id\" v-model=\"vue_id\">\r\n            <input type=\"password\" placeholder=\"密码\" name=\"password\" id=\"password\" @keyup.enter=\"login_($event)\"\r\n                v-model=\"vue_psw\">\r\n            <button id=\"login_btn\" @click=\"login_($event)\">登陆</button>\r\n        </div>\r\n    </transition>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'vue_login',\r\n    props: {\r\n        ip: String\r\n    },\r\n    data() {\r\n        return {\r\n            vue_id: '',\r\n            vue_psw: '',\r\n        }\r\n    },\r\n    methods: {\r\n        login_: function (event) {\r\n            var params = 'id=' + this.vue_id + '&password=' + this.vue_psw;\r\n            fetch(\r\n                'http://' + this.ip + ':3007/api/login',\r\n\r\n                {\r\n                    type: 'post',\r\n                    contentType: 'application/x-www-form-urlencoded',\r\n                    data: params,\r\n                }).then(\r\n                    function (result) {\r\n                        window.localStorage.setItem(result.id, result.id);\r\n                        window.localStorage.setItem('serverIP', result.serverIP)\r\n                        sessionStorage.name = result.name;\r\n                        sessionStorage.id = result.id;\r\n                        sessionStorage.serverIP = result.serverIP;\r\n                        if (result.status === 0) {\r\n                            alert(\"登录成功,跳转至主界面\");\r\n                            window.location.href = result.url;\r\n                        }\r\n                        else\r\n                            alert(result.message);\r\n                    }\r\n                )\r\n                .catch(err => {\r\n                    alert(\"登陆失败！\" + err)\r\n                    console.log(err)\r\n                })\r\n        },\r\n    }\r\n}\r\n\r\n</script>\r\n<style scoped lang=\"less\">\r\n.lb_trans-enter-active {\r\n    animation: showup .5s ease;\r\n}\r\n\r\n.lb_trans-leave-active {\r\n    animation: showup .5s ease reverse;\r\n}\r\n\r\n@keyframes showup {\r\n    from {\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        opacity: 1;\r\n    }\r\n}\r\n</style>"],"mappings":"AAaA;EACAA,IAAA;EACAC,KAAA;IACAC,EAAA,EAAAC;EACA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,MAAA,WAAAA,CAAAC,KAAA;MACA,IAAAC,MAAA,gBAAAL,MAAA,uBAAAC,OAAA;MACAK,KAAA,CACA,iBAAAT,EAAA,sBAEA;QACAU,IAAA;QACAC,WAAA;QACAT,IAAA,EAAAM;MACA,GAAAI,IAAA,CACA,UAAAC,MAAA;QACAC,MAAA,CAAAC,YAAA,CAAAC,OAAA,CAAAH,MAAA,CAAAI,EAAA,EAAAJ,MAAA,CAAAI,EAAA;QACAH,MAAA,CAAAC,YAAA,CAAAC,OAAA,aAAAH,MAAA,CAAAK,QAAA;QACAC,cAAA,CAAArB,IAAA,GAAAe,MAAA,CAAAf,IAAA;QACAqB,cAAA,CAAAF,EAAA,GAAAJ,MAAA,CAAAI,EAAA;QACAE,cAAA,CAAAD,QAAA,GAAAL,MAAA,CAAAK,QAAA;QACA,IAAAL,MAAA,CAAAO,MAAA;UACAC,KAAA;UACAP,MAAA,CAAAQ,QAAA,CAAAC,IAAA,GAAAV,MAAA,CAAAW,GAAA;QACA,OAEAH,KAAA,CAAAR,MAAA,CAAAY,OAAA;MACA,CACA,EACAC,KAAA,CAAAC,GAAA;QACAN,KAAA,WAAAM,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}