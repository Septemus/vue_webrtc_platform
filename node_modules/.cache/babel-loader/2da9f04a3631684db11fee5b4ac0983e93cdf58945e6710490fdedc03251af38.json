{"ast":null,"code":"export default {\n  name: 'vue_register',\n  props: {\n    ip: String\n  },\n  data() {\n    return {\n      vue_rid: '',\n      vue_rname: '',\n      vue_rpsw: '',\n      vue_rpsw1: '',\n      f_correct: true,\n      f_same: true\n    };\n  },\n  methods: {\n    register_: function (event) {\n      var params = \"id=\" + this.vue_rid + \"&password=\" + this.vue_rpsw + \"&name=\" + this.vue_rname;\n      fetch('http://' + this.ip + ':3007/api/reguser', {\n        type: 'post',\n        contentType: 'application/x-www-form-urlencoded',\n        data: params\n      }).then(function (result) {\n        if (result.status === 0) {\n          alert(\"注册成功,点击回到登陆界面\");\n          window.location.href = result.url;\n        } else {\n          alert(result.message);\n        }\n      }).catch(err => {\n        alert(\"注册失败！\" + err);\n        console.log(err);\n      });\n    }\n  },\n  computed: {\n    notice_below_psw() {\n      return this.f_correct ? \"格式正确\" : \"至少8个字符，至少1个字母，1个数字和1个特殊字符\";\n    },\n    notice_below_repsw() {\n      return this.f_same ? \"两次输入一致\" : \"两次输入不一致！\";\n    }\n  },\n  watch: {\n    vue_rpsw: {\n      immediate: true,\n      handler(new_val, old_val) {\n        // console.log(new_val)\n        if (!new_val.match(/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/)) {\n          // console.log(\"不符合\")\n          this.f_correct = false;\n        } else {\n          this.f_correct = true;\n        }\n        if (new_val !== this.vue_rpsw1) {\n          // console.log(\"不符合\")\n          this.f_same = false;\n        } else {\n          this.f_same = true;\n        }\n      }\n    },\n    vue_rpsw1: {\n      immediate: false,\n      handler(new_val, old_val) {\n        // console.log(new_val)\n        if (new_val !== this.vue_rpsw) {\n          // console.log(\"不符合\")\n          this.f_same = false;\n        } else {\n          this.f_same = true;\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","ip","String","data","vue_rid","vue_rname","vue_rpsw","vue_rpsw1","f_correct","f_same","methods","register_","event","params","fetch","type","contentType","then","result","status","alert","window","location","href","url","message","catch","err","console","log","computed","notice_below_psw","notice_below_repsw","watch","immediate","handler","new_val","old_val","match"],"sources":["src/components/vue_register.vue"],"sourcesContent":["<template>\r\n    <transition>\r\n    \r\n    </transition>\r\n    <div class=\"register-box\"\r\n        v-show=\"this.$parent.form_box_current === 'register'&&this.$parent.panel_current === 'login_register'\">\r\n\r\n        <h1>register</h1>\r\n        <input type=\"text\" placeholder=\"用户名\" id=\"Rid\" v-model=\"vue_rid\">\r\n        <input type=\"text\" placeholder=\"昵称\" id=\"Rname\" v-model=\"vue_rname\">\r\n        <div class=\"psw1\">\r\n            <input type=\"password\" placeholder=\"密码\" id=\"Rpassword\" v-model=\"vue_rpsw\">\r\n            <div class=\"alert format_correct\"\r\n                :class=\"[f_correct?'text-success':'text-danger',f_correct?'alert-success':'alert-danger']\">\r\n                {{notice_below_psw}}</div>\r\n        </div>\r\n        <div class=\"psw1\">\r\n            <input type=\"password\" placeholder=\"确认密码\" v-model=\"vue_rpsw1\">\r\n            <div class=\"alert format_correct\"\r\n                :class=\"[f_same?'text-success':'text-danger',f_same?'alert-success':'alert-danger']\">\r\n                {{notice_below_repsw}}</div>\r\n        </div>\r\n        <button id=\"register\" @click=\"register_\">注册</button>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        name:'vue_register',\r\n        props: {\r\n            ip:String\r\n        },\r\n        data() {\r\n            return {\r\n                vue_rid: '',\r\n                vue_rname: '',\r\n                vue_rpsw: '',\r\n                vue_rpsw1: '',\r\n                f_correct: true,\r\n                f_same: true\r\n            }\r\n        },\r\n        methods: {\r\n            register_: function (event) {\r\n                var params = \"id=\" + this.vue_rid + \"&password=\" + this.vue_rpsw + \"&name=\" + this.vue_rname;\r\n                fetch('http://' + this.ip + ':3007/api/reguser',{\r\n                    type: 'post',\r\n                    contentType: 'application/x-www-form-urlencoded',\r\n                    data: params\r\n                }).then(\r\n                    function (result) {\r\n                        if (result.status === 0) {\r\n                            alert(\"注册成功,点击回到登陆界面\");\r\n                            window.location.href = result.url;\r\n                        }\r\n                        else {\r\n                            alert(result.message);\r\n                        }\r\n                    }\r\n\r\n                ).catch(err => {\r\n                    alert(\"注册失败！\" + err)\r\n                    console.log(err)\r\n                })\r\n            },\r\n        },\r\n        computed: {\r\n            notice_below_psw() {\r\n                return this.f_correct ? \"格式正确\" : \"至少8个字符，至少1个字母，1个数字和1个特殊字符\"\r\n            },\r\n            notice_below_repsw() {\r\n                return this.f_same ? \"两次输入一致\" : \"两次输入不一致！\"\r\n            }\r\n        },\r\n        watch: {\r\n            vue_rpsw: {\r\n                immediate: true,\r\n                handler(new_val, old_val) {\r\n                    // console.log(new_val)\r\n                    if (!new_val.match(/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/)) {\r\n                        // console.log(\"不符合\")\r\n                        this.f_correct = false\r\n                    }\r\n                    else {\r\n                        this.f_correct = true\r\n                    }\r\n                    if (new_val !== this.vue_rpsw1) {\r\n                        // console.log(\"不符合\")\r\n                        this.f_same = false\r\n                    }\r\n                    else {\r\n                        this.f_same = true\r\n                    }\r\n                }\r\n            },\r\n            vue_rpsw1: {\r\n                immediate: false,\r\n                handler(new_val, old_val) {\r\n                    // console.log(new_val)\r\n                    if (new_val !== this.vue_rpsw) {\r\n                        // console.log(\"不符合\")\r\n                        this.f_same = false\r\n                    }\r\n                    else {\r\n                        this.f_same = true\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n</script>\r\n<style scoped>\r\n.psw1 {\r\n    width:100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    position: relative;\r\n}\r\n.format_correct {\r\n    position: absolute;\r\n    /* color: ; */\r\n    background-color: transparent;\r\n    left: 15%;\r\n    top:38px;\r\n    font-size: 8px;\r\n    width: 70%;\r\n    height: 22px;\r\n    line-height: 16px;\r\n    padding: 2px 5px;\r\n}\r\n</style>"],"mappings":"AA0BA;EACAA,IAAA;EACAC,KAAA;IACAC,EAAA,EAAAC;EACA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,SAAA;MACAC,QAAA;MACAC,SAAA;MACAC,SAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,SAAA,WAAAA,CAAAC,KAAA;MACA,IAAAC,MAAA,gBAAAT,OAAA,uBAAAE,QAAA,mBAAAD,SAAA;MACAS,KAAA,kBAAAb,EAAA;QACAc,IAAA;QACAC,WAAA;QACAb,IAAA,EAAAU;MACA,GAAAI,IAAA,CACA,UAAAC,MAAA;QACA,IAAAA,MAAA,CAAAC,MAAA;UACAC,KAAA;UACAC,MAAA,CAAAC,QAAA,CAAAC,IAAA,GAAAL,MAAA,CAAAM,GAAA;QACA,OACA;UACAJ,KAAA,CAAAF,MAAA,CAAAO,OAAA;QACA;MACA,CAEA,EAAAC,KAAA,CAAAC,GAAA;QACAP,KAAA,WAAAO,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;MACA;IACA;EACA;EACAG,QAAA;IACAC,iBAAA;MACA,YAAAvB,SAAA;IACA;IACAwB,mBAAA;MACA,YAAAvB,MAAA;IACA;EACA;EACAwB,KAAA;IACA3B,QAAA;MACA4B,SAAA;MACAC,QAAAC,OAAA,EAAAC,OAAA;QACA;QACA,KAAAD,OAAA,CAAAE,KAAA;UACA;UACA,KAAA9B,SAAA;QACA,OACA;UACA,KAAAA,SAAA;QACA;QACA,IAAA4B,OAAA,UAAA7B,SAAA;UACA;UACA,KAAAE,MAAA;QACA,OACA;UACA,KAAAA,MAAA;QACA;MACA;IACA;IACAF,SAAA;MACA2B,SAAA;MACAC,QAAAC,OAAA,EAAAC,OAAA;QACA;QACA,IAAAD,OAAA,UAAA9B,QAAA;UACA;UACA,KAAAG,MAAA;QACA,OACA;UACA,KAAAA,MAAA;QACA;MACA;IACA;EACA;AAGA"},"metadata":{},"sourceType":"module","externalDependencies":[]}